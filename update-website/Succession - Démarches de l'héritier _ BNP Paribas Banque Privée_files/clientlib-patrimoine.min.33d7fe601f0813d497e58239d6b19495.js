(function(){function t(){u.log("init --\x3e patrimoine");return{blocPresentation:function(){function c(){new Waypoint({element:b.querySelector(".slide__step-1"),handler:function(){p.classList.toggle("fixed")}});new Waypoint({element:document.querySelector(".more-content"),offset:"bottom-in-view",handler:function(){p.classList.toggle("fixed")}})}function g(){new Waypoint({element:b.querySelector(".slide__step-1"),handler:function(a){m=!m;q.classList.toggle("shown");r.forEach(function(d){d.classList.toggle("fixed-content")});
p.classList.toggle("fixed");b.querySelector(".animations-container").classList.toggle("fixed")}});new Waypoint({element:b.querySelector(".slide__step-2"),handler:function(a){b.querySelector(".slide__step-1").classList.toggle("active");b.querySelector(".slide__step-2").classList.toggle("active");b.querySelector(".motion-1 .dots-container").classList.toggle("hide");b.querySelector(".motion-2 .trails-container").classList.toggle("shown");d&&d.pause();anime({targets:".locker-draw path",strokeDashoffset:[anime.setDashoffset,
0],easing:"cubicBezier(.33,1.94,.69,1)",delay:"down"===a?0:1300,duration:1200,direction:"down"===a?"reverse":"normal"});var d=anime({targets:".fingerprint-draw path",strokeDashoffset:[anime.setDashoffset,0],easing:"cubicBezier(.33,1.94,.69,1)",duration:1200,delay:"down"===a?1300:0,direction:"down"===a?"normal":"reverse"})}});new Waypoint({element:b.querySelector(".slide__step-3"),handler:function(a){b.querySelector(".slide__step-2").classList.toggle("active");b.querySelector(".slide__step-3").classList.toggle("active");
b.querySelector(".motion-2 .trails-container").classList.toggle("shown");d&&d.pause();k&&k.pause();var d=anime({targets:".fingerprint-draw path",strokeDashoffset:[anime.setDashoffset,0],easing:"cubicBezier(.33,1.94,.69,1)",delay:"down"===a?0:1300,duration:1200,direction:"down"===a?"reverse":"normal"}),k=anime({targets:".cloud-draw path",strokeDashoffset:[anime.setDashoffset,0],easing:"cubicBezier(.33,1.94,.69,1)",duration:1200,delay:"down"===a?1300:0,direction:"down"===a?"normal":"reverse"});"down"===
a?e():l()}});new Waypoint({element:b.querySelector(".slide__step-4"),handler:function(a){b.querySelector(".slide__step-3").classList.toggle("active");b.querySelector(".slide__step-4").classList.toggle("active");b.querySelector(".motion-4 .dots-container").classList.toggle("shown");d&&d.pause();k&&k.pause();var d=anime({targets:".cloud-draw path",strokeDashoffset:[anime.setDashoffset,0],easing:"cubicBezier(.33,1.94,.69,1)",delay:"down"===a?0:1300,duration:1200,direction:"down"===a?"reverse":"normal"}),
k=anime({targets:".love-draw path",strokeDashoffset:[anime.setDashoffset,0],easing:"cubicBezier(.33,1.94,.69,1)",duration:1200,delay:"down"===a?1300:0,direction:"down"===a?"normal":"reverse"});"down"===a?l():e()}});new Waypoint({element:b.querySelector(".slide__step-5"),handler:function(a){b.querySelector(".slide__step-4").classList.toggle("active");b.querySelector(".slide__step-5").classList.toggle("active");b.querySelector(".motion-4 .dots-container").classList.toggle("shown");b.querySelector(".motion-5 .shields-container").classList.toggle("shown");
d&&d.pause();k&&k.pause();var d=anime({targets:".love-draw path",strokeDashoffset:[anime.setDashoffset,0],easing:"cubicBezier(.33,1.94,.69,1)",delay:"down"===a?0:1300,duration:1200,direction:"down"===a?"reverse":"normal"}),k=anime({targets:".check-draw polyline",strokeDashoffset:[anime.setDashoffset,0],easing:"cubicBezier(.33,1.94,.69,1)",duration:1E3,delay:"down"===a?1300:0,direction:"down"===a?"normal":"reverse"})}});new Waypoint({element:document.querySelector("#guide"),handler:function(a){q.classList.toggle("shown");
b.querySelector(".animations-container").classList.toggle("fixed");r.forEach(function(d){d.classList.toggle("fixed-content")})}})}function l(){document.querySelector(".points-cloud").classList.remove("shown");f.forEach(function(a){a.pause()})}function e(){document.querySelector(".points-cloud").classList.add("shown");f.forEach(function(a){a.play()})}var n=h(window),b=document.querySelector("#presentation"),p=b.querySelector(".button-wrapper"),r=Array.from(b.querySelectorAll(".slide")),q=b.querySelector(".progress-bar-wrapper"),
v=b.querySelector(".progress-bar"),m=!1,f=[];f[0]=anime({targets:".motion-3 #morph-path",points:[{value:"27,163 67,26 106,105 153,228 334,259 153,228 316,163 289,61 171.5,10 106,105 171.5,10 67,26"},{value:"52,32 33.4,123 108,200 254,226 334,192 254,226 345,119 229,13 136.7,61.7 108,200 136.7,61.7 33.4,123"},{value:"51.6,178.8 86.7,71.9 112.7,239.7 246.7,220.7 335.8,188.9 246.7,220.7 362.8,76.7 263.3,71.9 171.5,10 112.7,239.7 171.5,10 86.7,71.9"}],easing:"easeInOutExpo",duration:4500,loop:!0});f[1]=
anime({targets:".motion-3 .dot-1",translateX:[-20,2,0],translateY:[-15.8,-131,0],easing:"easeInOutExpo",duration:4500,loop:!0});f[2]=anime({targets:".motion-3 .dot-2",translateX:[-19,-40,0],translateY:[-44,40,0],easing:"easeInOutExpo",duration:4500,loop:!0});f[3]=anime({targets:".motion-3 .dot-3",translateX:[-8,-4,0],translateY:[-125,-30,0],easing:"easeInOutExpo",duration:4500,loop:!0});f[4]=anime({targets:".motion-3 .dot-4",translateX:[-80,0,0],translateY:[8,0,0],easing:"easeInOutExpo",duration:4500,
loop:!0});f[5]=anime({targets:".motion-3 .dot-5",translateX:[-10,0,0],translateY:[55,0,0],easing:"easeInOutExpo",duration:4500,loop:!0});f[6]=anime({targets:".motion-3 .dot-7",translateX:[-40,-15,0],translateY:[70,35,0],easing:"easeInOutExpo",duration:4500,loop:!0});f[7]=anime({targets:".motion-3 .dot-8",translateX:[20,-28,0],translateY:[-9,-48,0],easing:"easeInOutExpo",duration:4500,loop:!0});f[8]=anime({targets:".motion-3 .dot-9",translateX:[0,-30,0],translateY:[0,45,0],easing:"easeInOutExpo",duration:4500,
loop:!0});798>n.width()?(m=!1,b.querySelector(".animations-container").classList.remove("fixed"),r.forEach(function(a){a.classList.remove("fixed-content")}),q.classList.remove("shown"),c()):(g(),n.on("scroll",function(){if(m){var a=(document.body.scrollTop||document.documentElement.scrollTop-document.querySelector("#myfamilysafe .hero").clientHeight)/b.scrollHeight*100;100<=a&&(a=100);v.style.width=a+"%"}}))},flipCard:function(c){c.toggleClass("active")},cardsSlider:function(){h(".cards-wrapper").slick({arrows:!0,
prevArrow:'\x3cbutton type\x3d"button" data-role\x3d"none" class\x3d"slick-prev icon-left"\x3ePrevious\x3c/button\x3e',nextArrow:'\x3cbutton type\x3d"button" data-role\x3d"none" class\x3d"slick-next icon-right"\x3eNext\x3c/button\x3e',centerMode:!0,infinite:!1,initialSlide:0,slidesToShow:3,variableWidth:!0})},timelineSlider:function(){function c(){var n=g[e].querySelector(".tl-total").clientHeight,b=g[e].querySelector(".tl-current");anime({targets:b,height:[{value:"100%",duration:6E3},{value:"0%",
duration:300,easing:"cubicBezier(0.420, 0.000, 0.580, 1.000)"}],marginTop:[{value:n+"px",duration:300,delay:6E3,easing:"cubicBezier(0.420, 0.000, 0.580, 1.000)"},{value:"0",duration:0}],easing:"linear",complete:function(){g[e].classList.remove("active");anime({targets:l[e],opacity:[1,0],duration:400,easing:"easeInOutSine"});e++;e>=g.length&&(e=0);g[e].classList.add("active");anime({targets:l[e],opacity:[0,1],translateY:["25%",0],delay:300,easing:"spring(1, 80, 10, 0)"});c()}})}var g=h(".timeline .step"),
l=h(".illustrations-container img"),e=0;setTimeout(function(){c()},500)},setTutoIframe:function(){var c=GlobalSite.checkDependency("GlobalSite.setVideo"),g=h("#tutoModal .video-player");0===g.children("iframe").length&&c(g)}}}window.GlobalSite=window.GlobalSite||{};var w=GlobalSite.checkDependency("GlobalSite.logFactory"),h=GlobalSite.checkDependency("$"),u=w("patrimoine.js");h(function(){var c=t();-1<window.location.pathname.indexOf("myfamilysafe")&&(c.blocPresentation(),c.cardsSlider(),c.timelineSlider(),
h(document).on("click",".cards-slider .card",function(){c.flipCard(h(this))}),h(window).on("resize",function(){c.blocPresentation()}),h(document).on("click","#offre-integree .play-cta",function(){c.setTutoIframe()}))})})();